# 学习笔记
## 架构原理
### chromium架构
![chromium架构图](../../public/img/大前端/electron/electron学习笔记/img1.png)
一个浏览器中会有如下进程：
- 一个browser进程（主进程）
- 多个render进程（渲染进程）

**通信**：进程间通过IPC通信进行通信，`RenderProcessHost`和`RenderProcess`专门用于处理IPC事件

**ResourceDispatcher**：对资源请求进行处理
### electron架构
![electron架构图](../../public/img/大前端/electron/electron学习笔记/img2.png)
#### 主进程
- Electron运行`package.json`的main脚本的进程被称为主进程
- 每个应用只有一个主进程
- 管理原生 GUI，典型的窗口 (BrowserWindow、Tray、Dock、Menu)
- 创建渲染进程
- 控制应用生命周期 (app)
### Node.js与Chromiums事件融合
Node.js事件循环基于`libuv`，`libuv`引入了`backend_fd`概念——`libuv`轮询事件的文件描述符；通过轮询`backend_fd`可以知道libuv`的新事件。

Electron创建一个新的安全线程轮询`backend_fd`，Node.js有新事件之后通过`PostTask`转发到chromium的事件循环中：

![事件融合](../../public/img/大前端/electron/electron学习笔记/img.png)
## 桌面端技术对比
- Native(C++/C#/0bjective-C)
  - 高性能
  - 原生体验
  - 包体积小
  - 门槛高
  - 迭代速度慢
- QT
  - 基于C++
  - 跨平台(Mac、Windows、ios、Android、Linux、嵌入式)
  - 高性能
  - 媲美原生的体验
  - 门槛高
  - 迭代速度一般
- Fluter
  - 跨端(ios、Android、Mac、Windows、Linux、Web)
  - PC 端在发展中 (Mac > Linux、Windows)
  - 基建少
- NW.js
  - 跨平台 (Mac、Windows、Linux)，v0.14.7支持XP(XP 市场份额约为15%)
  - 迭代快，Web 技术构建
  - 源码加密、支持 Chrome 扩展
  - 不错的社区
  - 包体积大
  - 性能一般
- Electron
  - 跨平台 (Mac、Windows、Linux、不支持 XP)
  - Web 技术构建
  - 活跃的社区
  - 大型应用案例
  - 包体积大
  - 性能一般
![对比图](../../public/img/大前端/electron/electron学习笔记/img_1.png)